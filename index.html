<!DOCTYPE html>
<html>
<head>
    <title>AR Wedding Invite</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

    <style>
        #debug-text {
            position: fixed; top: 50%; left: 50%; 
            transform: translate(-50%, -50%);
            z-index: 9999; background: white; padding: 20px;
            font-family: Arial, sans-serif; border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0,0,0,0.5);
            text-align: center;
        }
    </style>

    <script>
        AFRAME.registerComponent("button-action", {
            schema: { type: "string" },
            init: function () {
                // Click Action
                this.el.addEventListener("click", () => {
                    if (this.data === "menu") {
                        alert("ðŸ½ Menu:\nâ€¢ Starters: Paneer Tikka\nâ€¢ Main: Biryani\nâ€¢ Dessert: Ice Cream");
                    }
                    if (this.data === "location") {
                        // --- GOOGLE MAPS LOGIC ---
                        const destination = "VIT+University+Vellore";
                        // This specific link format forces the app to open
                        window.open("https://www.google.com/maps/dir/?api=1&destination=" + destination, "_blank");
                    }
                });

                // Hover Effects
                this.el.addEventListener("mouseenter", () => { 
                    this.el.setAttribute("scale", "1.1 1.1 1.1"); 
                    this.el.setAttribute("material", "opacity", "1"); 
                });
                this.el.addEventListener("mouseleave", () => { 
                    this.el.setAttribute("scale", "1 1 1"); 
                    this.el.setAttribute("material", "opacity", "0.9"); 
                });
            }
        });

        window.addEventListener('arjs-nf-loaded', () => {
            document.getElementById("debug-text").style.display = "none";
        });
    </script>
</head>

<body style="margin: 0; overflow: hidden;">
    
    <div id="debug-text">
        <h3>Loading AR...</h3>
        <p>Please Allow Camera Access</p>
    </div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" vr-mode-ui="enabled: false">

        <a-marker preset="hiro">
            <a-entity position="0 0 0">
                
                <a-torus position="0 0.8 0" radius="0.4" radius-tubular="0.05" color="gold"
                         animation="property: rotation; to: 0 360 0; loop: true; dur: 5000">
                </a-torus>

                <a-box 
                    position="0 0 0.5" 
                    width="1.2" height="0.25" depth="0.2" 
                    color="#4285F4" 
                    material="opacity: 0.9;"
                    class="clickable" 
                    button-action="location">
                    <a-text value="NAVIGATE TO WEDDING" align="center" position="0 0 0.11" scale="0.8 0.8 0.8"></a-text>
                </a-box>

                <a-box 
                    position="0 -0.5 0.5" 
                    width="0.8" height="0.15" depth="0.2" 
                    color="#34A853" 
                    material="opacity: 0.9;"
                    class="clickable" 
                    button-action="menu">
                    <a-text value="View Menu" align="center" position="0 0 0.11" scale="0.6 0.6 0.6"></a-text>
                </a-box>

            </a-entity>
        </a-marker>

        <a-entity camera>
            <a-entity cursor="rayOrigin: mouse" raycaster="objects: .clickable"></a-entity>
        </a-entity>

    </a-scene>
</body>
</html>
