<!DOCTYPE html>
<html>
<head>
    <title>AR Wedding Invite</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

    <style>
        #debug-text {
            position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%);
            z-index: 9999;
            background: rgba(255,255,255,0.9);
            padding: 20px;
            font-family: sans-serif;
            text-align: center;
            border-radius: 10px;
            border: 1px solid #ccc;
        }
    </style>

    <script>
        AFRAME.registerComponent("button-action", {
            schema: { type: "string" },
            init: function () {
                this.el.addEventListener("click", () => {
                    
                    // --- MENU ACTION ---
                    if (this.data === "menu") {
                        alert("ðŸ½ Menu:\n\nâ€¢ Starters: Paneer Tikka\nâ€¢ Main: Biryani\nâ€¢ Dessert: Ice Cream");
                    }

                    // --- NAVIGATION ACTION (FIXED) ---
                    if (this.data === "location") {
                        // 1. Define the destination (URL Encoded)
                        // For VIT, use: VIT+University+Vellore
                        const destination = "VIT+University+Vellore";
                        
                        // 2. The Official Google Maps Direction Link
                        // 'dir/?api=1' tells it to start navigation mode
                        const url = "https://www.google.com/maps/dir/?api=1&destination=" + destination;
                        
                        // 3. Open it
                        window.open(url, "_blank");
                    }
                });
                
                // Hover Effects
                this.el.addEventListener("mouseenter", () => { 
                    this.el.setAttribute("scale", "1.1 1.1 1.1"); 
                });
                this.el.addEventListener("mouseleave", () => { 
                    this.el.setAttribute("scale", "1 1 1"); 
                });
            }
        });

        // Hide loading text when camera starts
        window.addEventListener('arjs-nf-loaded', () => {
            document.getElementById("debug-text").style.display = "none";
        });
    </script>
</head>

<body style="margin: 0; overflow: hidden;">
    
    <div id="debug-text">
        <h3>Loading AR...</h3>
        <p>Please Allow Camera Access.</p>
    </div>

    <a-scene 
        embedded 
        arjs="sourceType: webcam; debugUIEnabled: false;" 
        vr-mode-ui="enabled: false">

        <a-marker preset="hiro">
            <a-entity position="0 0 0">
                
                <a-box position="0 0.5 0" color="gold" 
                       animation="property: rotation; to: 0 360 0; loop: true; dur: 4000">
                </a-box>

                <a-box position="-0.8 0 0.5" width="0.8" height="0.15" depth="0.3" color="#4CAF50"
                       class="clickable" button-action="menu">
                    <a-text value="Menu" align="center" position="0 0 0.16" scale="2 2 2"></a-text>
                </a-box>

                <a-box position="0.8 0 0.5" width="0.8" height="0.15" depth="0.3" color="#2196F3"
                       class="clickable" button-action="location">
                    <a-text value="Navigate" align="center" position="0 0 0.16" scale="2 2 2"></a-text>
                </a-box>

            </a-entity>
        </a-marker>

        <a-entity camera>
            <a-entity cursor="rayOrigin: mouse" raycaster="objects: .clickable"></a-entity>
        </a-entity>

    </a-scene>
</body>
</html>